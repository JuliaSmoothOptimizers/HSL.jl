<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · HSL.jl</title><meta name="title" content="Home · HSL.jl"/><meta property="og:title" content="Home · HSL.jl"/><meta property="twitter:title" content="Home · HSL.jl"/><meta name="description" content="Documentation for HSL.jl."/><meta property="og:description" content="Documentation for HSL.jl."/><meta property="twitter:description" content="Documentation for HSL.jl."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/style.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href><img src="assets/logo.png" alt="HSL.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href>HSL.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Installing"><span>Installing</span></a></li><li><a class="tocitem" href="#Supported-Packages"><span>Supported Packages</span></a></li></ul></li><li><a class="tocitem" href="tutorial/">Tutorial</a></li><li><a class="tocitem" href="reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaSmoothOptimizers/HSL.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaSmoothOptimizers/HSL.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Home"><a class="docs-heading-anchor" href="#Home">HSL.jl documentation</a><a id="Home-1"></a><a class="docs-heading-anchor-permalink" href="#Home" title="Permalink"></a></h1><p>A set of interfaces to <a href="http://www.hsl.rl.ac.uk">HSL</a> packages for sparse linear algebra.</p><p>Certain HSL packages are freely available to all, others are freely available to academics only. Please refer to the website above for licensing information. In all cases, users are responsible for obtaining HSL packages.</p><h2 id="Installing"><a class="docs-heading-anchor" href="#Installing">Installing</a><a id="Installing-1"></a><a class="docs-heading-anchor-permalink" href="#Installing" title="Permalink"></a></h2><pre><code class="language-JULIA hljs">julia&gt; ]
pkg&gt; add HSL</code></pre><p>At this point, make sure that there isn&#39;t a stray METIS library on your library path. You especially want to make sure that METIS 5 is not accessible because the HSL library currently interfaced only supports METIS 4. If you have such library accessible, it is important to remove it from the library path, at least temporarily. For example, if you are on OSX and are using Homebrew, you can hide METIS 5 with <code>brew unlink metis</code>. After the install procedure is complete, it is fine to link <code>metis</code> again with <code>brew link metis</code>.</p><p>Set the environment variables <code>HSL_MA57_PATH</code> and <code>HSL_MA97_PATH</code> to specify where the source archives <code>tar.gz</code> are stored. Alternatively, you can use the <code>zip</code> archive as long as <code>unzip</code> is installed on your system. The <code>HSL</code> Julia module will take care of compilation. Once the source archives have been placed in the locations indicated by the environment variables, run</p><pre><code class="language-JULIA hljs">julia&gt; ]
pkg&gt; build HSL
pkg&gt; test HSL</code></pre><p>Note that a C and Fortran compilers are required. Should it be necessary, you can set the compilers to use by setting the environment variables</p><ul><li><code>HSL_FC</code>: the Fortran 90/95 compiler (default: <code>gfortran</code>)</li><li><code>HSL_F77</code>: the Fortran 77 compiler (default: the same as <code>FC</code>)</li><li><code>HSL_CC</code>: the C compiler (default: <code>gcc</code>).</li></ul><h3 id="General-Guidelines-on-Compilers"><a class="docs-heading-anchor" href="#General-Guidelines-on-Compilers">General Guidelines on Compilers</a><a id="General-Guidelines-on-Compilers-1"></a><a class="docs-heading-anchor-permalink" href="#General-Guidelines-on-Compilers" title="Permalink"></a></h3><p>The version of gcc and gfortran used to compile HSL.jl should be based on the same version of the shared <code>libgfortran</code> library as the version of Julia being used. On Linux, Julia ≥ 1.8 is based on <code>libgfortran</code> version 5, whereas on macOS, they are based on <code>libgfortran</code> version 4. Thus for instance, versions of gcc/gfortran as recent as 11 are appropriate on Linux, but version 7 could be used on macOS. On macOS, the compilers can be installed with Homebrew using</p><pre><code class="nohighlight hljs">brew install gcc@7</code></pre><h3 id="Installing-on-Apple-Silicon"><a class="docs-heading-anchor" href="#Installing-on-Apple-Silicon">Installing on Apple Silicon</a><a id="Installing-on-Apple-Silicon-1"></a><a class="docs-heading-anchor-permalink" href="#Installing-on-Apple-Silicon" title="Permalink"></a></h3><p>Homebrew does not (yet) provide precompiled binaries for gcc/gfortran based on <code>libgfortran</code> version 4. One solution is to use Julia and the compilers built for Intel Macs via Rosetta. First make sure that Rosetta is installed by following, e.g., <a href="https://osxdaily.com/2020/12/04/how-install-rosetta-2-apple-silicon-mac">these instructions</a>.</p><p>You may now install Homebrew for Intel Macs on your Silicon Mac:</p><pre><code class="nohighlight hljs">arch -x86_64 /bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;</code></pre><p>Note that Homebrew for Silicon installs in <code>/opt/homebrew</code> whereas Homebrew for Intel installs in <code>/usr/local</code>.</p><p>Next, install gcc/gfortran version 7 for Intel:</p><pre><code class="nohighlight hljs">arch -x86_64 /usr/local/bin/brew install gcc@7</code></pre><p>Finally, define the environment variables</p><ul><li><code>HSL_FC=/usr/local/bin/gfortran-7 -arch x86_64</code></li><li><code>HSL_CC=/usr/local/bin/gcc-7 -arch x86_64</code></li></ul><p>prior to building HSL.jl from the Julia command prompt.</p><h2 id="Supported-Packages"><a class="docs-heading-anchor" href="#Supported-Packages">Supported Packages</a><a id="Supported-Packages-1"></a><a class="docs-heading-anchor-permalink" href="#Supported-Packages" title="Permalink"></a></h2><h3 id="HSL_MA97"><a class="docs-heading-anchor" href="#HSL_MA97">HSL_MA97</a><a id="HSL_MA97-1"></a><a class="docs-heading-anchor-permalink" href="#HSL_MA97" title="Permalink"></a></h3><p>Supported versions:</p><ul><li>2.6.0</li><li>2.7.0</li></ul><p><a href="http://www.hsl.rl.ac.uk/catalogue/hsl_ma97.html">HSL_MA97</a>: an OpenMP-based direct solver for symmetric linear systems. Example:</p><pre><code class="language-julia hljs">using MatrixMarket
using HSL

K = MatrixMarket.mmread(&quot;K.mtx&quot;)  # only the lower triangle
rhs = readdlm(&quot;rhs.rhs&quot;)

LBL = Ma97(K)
ma97_factorize!(LBL)
x = ma97_solve(LBL, rhs)  # or x = LBL \ rhs</code></pre><h4 id="Rectangular-Systems"><a class="docs-heading-anchor" href="#Rectangular-Systems">Rectangular Systems</a><a id="Rectangular-Systems-1"></a><a class="docs-heading-anchor-permalink" href="#Rectangular-Systems" title="Permalink"></a></h4><p>There is a convenience interface to solve rectangular systems that complements the sparse QR factorization in Julia.</p><p>When <em>A</em> is <em>m</em>-by-<em>n</em> with <em>m</em> &lt; <em>n</em> and has full row rank,</p><pre><code class="language-julia hljs">(x, y) = ma97_solve(A, b)</code></pre><p>solves for the minimum-norm solution, i.e., <em>x</em> such that <em>Ax = b</em> and <em>x + Aᵀ y = 0</em>. The call</p><pre><code class="language-julia hljs">(x, y) = ma97_min_norm(A, b)</code></pre><p>is also defined, and is equivalent to the above.</p><p>When <em>m</em> &gt; <em>n</em> and has full column rank,</p><pre><code class="language-julia hljs">(r, x) = ma97_solve(A, b)</code></pre><p>solves for the least-squares solution, i.e., <em>x</em> such that <em>r = b - Ax</em> satisfies <em>Aᵀ r = 0</em>. The call</p><pre><code class="language-julia hljs">(r, x) = ma97_least_squares(A, b)</code></pre><p>is also defined, and is equivalent to the above.</p><h3 id="HSL_MA57"><a class="docs-heading-anchor" href="#HSL_MA57">HSL_MA57</a><a id="HSL_MA57-1"></a><a class="docs-heading-anchor-permalink" href="#HSL_MA57" title="Permalink"></a></h3><p><a href="http://www.hsl.rl.ac.uk/specs/ma57.pdf">HSL_MA57</a> version 5.2.0: a sparse, multifrontal solver for symmetric linear systems. Example:</p><pre><code class="language-julia hljs">using MatrixMarket
using HSL

K = MatrixMarket.mmread(&quot;examples/K_0.mtx&quot;)  # only the lower triangle
rhs = readdlm(&quot;examples/rhs_0.rhs&quot;)
rhss = hcat(rhs, rhs)

## factorize and solve
LDL = Ma57(K)
ma57_factorize!(LDL)
LDL.info.rank
x = ma57_solve(LDL, rhs)  # or x = LBL \ rhs
norm(K*x - rhs)
xx = ma57_solve(LDL, rhss)  # or x = LBL \ rhss</code></pre><h4 id="Rectangular-Systems-2"><a class="docs-heading-anchor" href="#Rectangular-Systems-2">Rectangular Systems</a><a class="docs-heading-anchor-permalink" href="#Rectangular-Systems-2" title="Permalink"></a></h4><p>There is a convenience interface to solve rectangular systems that complements the sparse QR factorization in Julia.</p><p>When <em>A</em> is <em>m</em>-by-<em>n</em> with <em>m</em> &lt; <em>n</em> and has full row rank,</p><pre><code class="language-julia hljs">(x, y) = ma57_solve(A, b)</code></pre><p>solves for the minimum-norm solution, i.e., <em>x</em> such that <em>Ax = b</em> and <em>x + Aᵀ y = 0</em>. The call</p><pre><code class="language-julia hljs">(x, y) = ma57_min_norm(A, b)</code></pre><p>is also defined, and is equivalent to the above.</p><p>When <em>m</em> &gt; <em>n</em> and has full column rank,</p><pre><code class="language-julia hljs">(r, x) = ma57_solve(A, b)</code></pre><p>solves for the least-squares solution, i.e., <em>x</em> such that <em>r = b - Ax</em> satisfies <em>Aᵀ r = 0</em>. The call</p><pre><code class="language-julia hljs">(r, x) = ma57_least_squares(A, b)</code></pre><p>is also defined, and is equivalent to the above. Example:</p><pre><code class="language-julia hljs">using MatrixMarket
using HSL

K = MatrixMarket.mmread(&quot;examples/K_0.mtx&quot;)  # only the lower triangle
rhs = readdlm(&quot;examples/rhs_0.rhs&quot;)

## solve min norm
K_mn = K[1:200,:]
x_mn, y_mn = ma57_min_norm(K_mn, rhs[1:200]) # == ma57_solve(K_mn, rhs[1:200])

## solve least squares
K_ls = K[:,1:200]
r_ls, x_ls = ma57_least_squares(K_ls, rhs)   # == ma57_solve(K_ls, rhs)</code></pre></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="tutorial/">Tutorial »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.0 on <span class="colophon-date" title="Friday 6 October 2023 01:39">Friday 6 October 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
